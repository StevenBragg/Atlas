---
# Atlas Brain Service
# Exposes health checks and metrics

apiVersion: v1
kind: Service
metadata:
  name: atlas-brain
  namespace: atlas
  labels:
    app: atlas
    component: brain
spec:
  type: ClusterIP
  selector:
    app: atlas
    component: brain
  ports:
    - name: http
      port: 8080
      targetPort: 8080
      protocol: TCP

---
# Atlas Brain NodePort Service (for external access during development)

apiVersion: v1
kind: Service
metadata:
  name: atlas-brain-external
  namespace: atlas
  labels:
    app: atlas
    component: brain
spec:
  type: NodePort
  selector:
    app: atlas
    component: brain
  ports:
    - name: http
      port: 8080
      targetPort: 8080
      nodePort: 30080
      protocol: TCP

---
# Redis Service

apiVersion: v1
kind: Service
metadata:
  name: atlas-redis
  namespace: atlas
  labels:
    app: atlas
    component: redis
spec:
  type: ClusterIP
  selector:
    app: atlas
    component: redis
  ports:
    - name: redis
      port: 6379
      targetPort: 6379
      protocol: TCP

---
# Headless Service for StatefulSet (future scaling)

apiVersion: v1
kind: Service
metadata:
  name: atlas-brain-headless
  namespace: atlas
  labels:
    app: atlas
    component: brain
spec:
  clusterIP: None
  selector:
    app: atlas
    component: brain
  ports:
    - name: http
      port: 8080
      targetPort: 8080
